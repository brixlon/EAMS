<div class="flex w-full min-h-screen bg-gray-50">
  <!-- SIDEBAR -->
  <aside
    id="sidebar"
    class={[
      "bg-indigo-600 text-white flex flex-col transition-all duration-300",
      if(@sidebar_open, do: "w-64", else: "w-20"),
      "hidden md:flex"
    ]}
  >
    <div class="p-6 flex items-center gap-2">
      <img src={~p"/images/logo.svg"} width="36" alt="EAMS Logo" class="brightness-0 invert" />
      <%= if @sidebar_open do %>
        <span class="font-bold text-xl">EAMS</span>
      <% end %>
    </div>

    <nav class="px-4 space-y-2 flex-1 overflow-y-auto">
      <.link navigate={~p"/"} class="block py-2 px-3 rounded hover:bg-indigo-500 transition flex items-center gap-2">
        ğŸ 
        <%= if @sidebar_open, do: "Dashboard" %>
      </.link>

      <.link navigate={~p"/organizations"} class="block py-2 px-3 rounded hover:bg-indigo-500 transition flex items-center gap-2">
        ğŸ¢
        <%= if @sidebar_open, do: "Organizations" %>
      </.link>

      <.link navigate={~p"/departments"} class="block py-2 px-3 rounded hover:bg-indigo-500 transition flex items-center gap-2">
        ğŸ›
        <%= if @sidebar_open, do: "Departments" %>
      </.link>

      <.link navigate={~p"/teams"} class="block py-2 px-3 rounded hover:bg-indigo-500 transition flex items-center gap-2">
        ğŸ‘¥
        <%= if @sidebar_open, do: "Teams" %>
      </.link>

      <.link navigate={~p"/supervisors"} class="block py-2 px-3 rounded hover:bg-indigo-500 transition flex items-center gap-2">
        ğŸ‘”
        <%= if @sidebar_open, do: "Supervisors" %>
      </.link>

      <.link navigate={~p"/attachees"} class="block py-2 px-3 rounded hover:bg-indigo-500 transition flex items-center gap-2">
        ğŸ“
        <%= if @sidebar_open, do: "Attachees" %>
      </.link>

      <.link navigate={~p"/projects"} class="block py-2 px-3 rounded hover:bg-indigo-500 transition flex items-center gap-2">
        ğŸ“
        <%= if @sidebar_open, do: "Projects" %>
      </.link>

      <.link navigate={~p"/reports"} class="block py-2 px-3 rounded hover:bg-indigo-500 transition flex items-center gap-2">
        ğŸ“Š
        <%= if @sidebar_open, do: "Reports" %>
      </.link>
    </nav>

    <!-- USER INFO -->
    <div class="p-4 border-t border-indigo-500">
      <%= if @current_user do %>
        <div class="flex items-center gap-3 mb-3">
          <div class="w-10 h-10 rounded-full bg-indigo-800 flex items-center justify-center">
            <%= String.first(@current_user.email) |> String.upcase() %>
          </div>

          <%= if @sidebar_open do %>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium truncate"><%= @current_user.email %></p>
              <p class="text-xs text-indigo-200 capitalize"><%= @current_user.role %></p>
            </div>
          <% end %>
        </div>

        <.link navigate={~p"/users/settings"} class="block py-2 px-3 text-sm rounded hover:bg-indigo-500 transition text-center mb-2">
          âš™ï¸ Settings
        </.link>

        <.link href={~p"/users/log_out"} method="delete" class="block py-2 px-3 text-sm rounded hover:bg-indigo-500 transition text-center">
          ğŸšª Log out
        </.link>
      <% end %>
    </div>
  </aside>

  <!-- MAIN CONTENT AREA -->
  <div class="flex-1 flex flex-col">
    <!-- HEADER -->
    <header class="bg-white border-b border-gray-200 px-8 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <!-- Toggle Button -->
        <button phx-click="toggle_sidebar" class="p-2 text-indigo-600 hover:text-indigo-800 focus:outline-none">
          â˜°
        </button>

        <h1 class="text-2xl font-semibold text-gray-800">
          <%= assigns[:page_title] || "Dashboard" %>
        </h1>
      </div>

      <!-- Mobile Menu -->
      <button class="md:hidden p-2 rounded hover:bg-gray-100 text-gray-600">
        <.icon name="hero-bars-3" class="size-6" />
      </button>
    </header>

    <!-- MAIN -->
    <main class="flex-1 p-8 overflow-y-auto">
      <.flash_group flash={@flash} />
      <%= @inner_content %>
    </main>

    <!-- FOOTER -->
    <footer class="bg-white border-t border-gray-200 px-8 py-4">
      <p class="text-sm text-gray-600 text-center">
        Â© <%= DateTime.utc_now().year %> EAMS - Enterprise Attachment Management System
      </p>
    </footer>
  </div>
</div>
